"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var _mithril=require("mithril"),_mithril2=_interopRequireDefault(_mithril),_templateBuilder=require("app/converter/template-builder"),_templateBuilder2=_interopRequireDefault(_templateBuilder),INDENT_2="2",INDENT_4="4",INDENT_TAB="tab",INDENT_OPTIONS=[{label:"2 spaces",value:INDENT_2},{label:"4 spaces",value:INDENT_4},{label:"Tabs",value:INDENT_TAB}],QUOTE_OPTIONS=[{label:"Single quotes",value:{quote:"'",attributeQuote:'"'}},{label:"Double quotes",value:{quote:'"',attributeQuote:"'"}}],Settings=function(t){var e=function(e){e.preventDefault(),t.attrs.setSettings("indent",e.currentTarget.value)},r=function(e){e.preventDefault(),t.attrs.setSettings("useBracket",e.currentTarget.checked)},i=function(e){return function(r){r.preventDefault(),t.attrs.setSettings("quotes",e)}};return{view:function(l){return(0,_mithril2.default)(".w-100.bg-light-gray.black.pa3.flex",{style:{top:"4rem"}},(0,_mithril2.default)(".w-33",(0,_mithril2.default)("h4.f6.ma0.mb3.ttu.tracked.near-black","Indent"),INDENT_OPTIONS.map(function(r){return(0,_mithril2.default)("label.dib.mr3",(0,_mithril2.default)("input.mr1[type=radio][name=ident][value="+r.value+"]",{checked:t.attrs.getSettings("indent")===r.value,onchange:e}),r.label)})),(0,_mithril2.default)(".w-33",(0,_mithril2.default)("h4.f6.ma0.mb3.ttu.tracked.near-black","Quotes"),QUOTE_OPTIONS.map(function(e){return(0,_mithril2.default)("label.dib.mr3",(0,_mithril2.default)("input.mr1[type=radio][name=quotes][value="+e.value+"]",{checked:t.attrs.getSettings("quotes")===e.value,onchange:i(e.value)}),e.label)})),(0,_mithril2.default)(".w-33",(0,_mithril2.default)("label.f6.fw6.ma0.mb3.ttu.tracked.near-black",(0,_mithril2.default)("input.mr1[type=checkbox]",{checked:t.attrs.getSettings("useBracket"),onchange:r}),"Use brackets for children nodes")))}}},App=function(t){var e={source:"",output:"",settingsOpen:!0,settings:{indent:INDENT_2,useBracket:!1,quotes:QUOTE_OPTIONS[0].value}},r=function(t){return e.settings[t]},i=function(t,r){return e.settings[t]=r},l=function(t){t.preventDefault(),e.source=t.currentTarget.value},a=function(t){return(0,_templateBuilder2.default)({source:e.source,indent:e.settings.indent,quotes:e.settings.quotes,useBracket:e.settings.useBracket})},u=function(t){t.preventDefault(),e.settingsOpen=!e.settingsOpen},n=function(t){var r=[],i=e.settings,l=i.indent,a=i.quotes,u=INDENT_OPTIONS.filter(function(t){return t.value===l});u[0]&&r.push((0,_mithril2.default)("span.mr4.light-red[title=Indentation]",""+u[0].label));var n=QUOTE_OPTIONS.filter(function(t){return t.value===a});return n[0]&&r.push((0,_mithril2.default)("span.mr4.light-red[title=Quoting]",""+n[0].label)),r};return{view:function(t){return(0,_mithril2.default)(".flex.flex-wrap",(0,_mithril2.default)(".w-100.pa3.bg-dark-gray.near-white.h3.flex.items-center.justify-between",(0,_mithril2.default)("",(0,_mithril2.default)("h1.dib.ttu.tracked.f5.fw6.ma0","Mithril Template Converter"),(0,_mithril2.default)("span.ml4.f6","A fork from ",(0,_mithril2.default)('a.light-blue[href="https://github.com/ArthurClemens/mithril-template-converter"]',"ArthurClemens/mithril-template-converter"))),(0,_mithril2.default)("",(0,_mithril2.default)("span.f6.ml4.ml-auto",n()),(0,_mithril2.default)("a[href=#]",{onclick:u},"Settings "+(e.settingsOpen?"▲":"▼")))),e.settingsOpen?(0,_mithril2.default)(Settings,{getSettings:r,setSettings:i}):null,(0,_mithril2.default)(".w-50.ph3.pv4",(0,_mithril2.default)('textarea.pa2.bg-light-gray.br2.bn.code.f6.w-100[placeholder="Enter your code"]',{oninput:l,style:{minHeight:"70vh"}})),(0,_mithril2.default)(".w-50.ph3.pv4",(0,_mithril2.default)('textarea.pa2.bg-light-gray.br2.bn.code.f6.w-100[placeholder="Mithril template will appear here. MAGIC!"]',{value:a(),style:{minHeight:"70vh"}})))}}};_mithril2.default.mount(document.body,App);